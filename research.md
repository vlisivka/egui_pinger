
# Дослідження: Реалізація Drag & Drop для перестановки рядків у egui

## Мета
Визначити оптимальний спосіб реалізації зміни порядку хостів у списку за допомогою перетягування мишею (Drag & Drop) в інтерфейсі `egui`.

## Опис варіантів

### 1. Нативний підхід (egui::DragAndDrop)
Бібліотека `egui` має вбудовану підтримку перетягування через API `dnd_drag_source` та `dnd_drop_zone`.
- **Як це працює**: 
  - Кожен рядок (або спеціальна іконка-ручка) обгортається у `ui.dnd_drag_source`.
  - Весь контейнер списку обгортається у `ui.dnd_drop_zone`.
  - Під час перетягування ми отримуємо інформацію про те, який елемент та над яким місцем знаходиться.
- **Переваги**: Не потребує додаткових залежностей. Повний контроль над візуалізацією.
- **Недоліки**: Потребує самостійної реалізації логіки розрахунку індексу вставки (визначення, між якими елементами зараз знаходиться курсор).

### 2. Використання бібліотеки `egui_dnd`
Цей крейт розроблений спеціально для спрощення сортування списків у `egui`.
- **Як це працює**: 
  - Використовується компонент `dnd(ui, "unique_id").show(items, |ui, item, handle, state| { ... })`.
  - Бібліотека автоматично обробляє анімації зміщення елементів та оновлення порядку в масиві.
- **Переваги**: Дуже швидка інтеграція. Плавні анімації "з коробки". Коректна обробка різних розмірів елементів.
- **Недоліки**: Додаткова залежність у проєкті.

### 3. Ручна реалізація через `Sense::drag()`
Взаємодія на рівні подій миші: `response.drag_delta()`.
- **Переваги**: Максимальна кастомізація.
- **Недоліки**: Велика кількість "ручного" коду для обробки станів, що може призвести до помилок у логіці UI.

## Рекомендації
Для `egui_pinger` я рекомендую **Варіант 1 (Нативний підхід)**, якщо ми хочемо зберегти проєкт легким, або **Варіант 2 (egui_dnd)**, якщо пріоритетом є якісна анімація та швидкість розробки.

Оскільки ми використовуємо `egui 0.33`, нативного функціоналу достатньо для реалізації простого переміщення:
1. Додати іконку `☰` зліва від назви хоста.
2. Використати `ui.dnd_drag_source` для іконки.
3. Використати `ui.dnd_drop_zone` для всього `ScrollArea`.
4. Оновити `AppState.hosts` на основі отриманих подій Drop.

## Вплив на проєкт
- **src/main.rs**: Рефакторинг циклу відображення хостів.
- **src/model/app_state.rs**: Додавання методу для перестановки елементів у векторі.
